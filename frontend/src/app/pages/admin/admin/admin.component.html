<div class="container-fluid text-center" id="titre">
  <div class="row justify-content-between align-items-center">
    
    <div class="col-md-12 d-flex justify-content-between align-items-center">
      <!-- Titre à gauche -->
      <div class="text-start">
        <h1>Annuaire interne</h1>
        <p>trouver rapidement vos collegue</p>
      </div>
           
       <div>
        <div class="dropdown">
  <a href="#" id="profileDropdown" data-bs-toggle="dropdown" aria-expanded="false"
     class="d-flex align-items-center text-decoration-none">
    <i class="bi bi-person-circle fs-4"></i>
  </a>

  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="profileDropdown">
    <li>
      <a class="dropdown-item" href="#" (click)="parametre($event)">Paramètres personnels</a>
    </li>
    <li><hr class="dropdown-divider"></li>
    <li>
      <a class="dropdown-item text-danger" href="#" (click)="logout($event)">Déconnexion</a>
    </li>
  </ul>
</div>

      </div>
    </div>

  </div>
</div>


<!-- Cartes d affichage des donnees -->
<div class="gestion">
 <div class="card-container">
  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Total employés</h5>
      <p class="card-text">869</p>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Total département</h5>
      <p class="card-text">7</p>
    </div>
  </div>

  <div class="card">
    <div class="card-body">
      <h5 class="card-title">Total services</h5>
      <p class="card-text">18</p>
    </div>
  </div>
</div>

<!-- Gestion des employes  -->
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Gestion des employés</h2>
  <button type="button" class="btn btn-primary" (click)="showAddForm = true">Ajouter un employé</button>
</div>


<!-- Barre de recherche -->
<app-search [employees]="employeeService.employees" (search)="onSearch($event)"></app-search>
 
<ul class="list-group">
  <li class="list-group-item d-flex justify-content-between align-items-center"
      *ngFor="let emp of employeeService.paginatedEmployees">
    <div class="d-flex align-items-center">
      <span class="badge bg-primary rounded-pill me-2">14</span>
      <div>
        <div class="fw-bold">{{ emp.nom }}</div>
        <span class="text-muted">{{ emp.poste }}</span><br>
        <span class="text-muted">{{ emp.direction }}</span>
         <small class="text-muted"> IP : {{ emp.idIP }}</small>
      </div>
    </div>
    <div class="d-flex align-items-center">
      <button class="btn btn-sm btn-outline-secondary me-2" title="Modifier" (click)="editEmployee(emp)">
        <i class="bi bi-pencil"></i>
      </button>
      <button class="btn btn-sm btn-outline-danger me-2" title="Supprimer" (click)="deleteEmployee(emp)">
        <i class="bi bi-trash"></i>
      </button>
      <button class="btn btn-sm btn-outline-primary" title="Changer de rôle">
        <i class="bi bi-person-gear"></i>
      </button>
    </div>
  </li>
</ul>


<!-- modal de mon formulaire d ajout -->


<div class="modal fade show" tabindex="-1" *ngIf="showAddForm" 
     style="display: flex; justify-content: center; align-items: center; background: rgba(0,0,0,0.3); position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 1050;">
  <div class="modal-dialog modal-lg">
    <div class="modal-content shadow-lg rounded-4 p-3">
      <div class="modal-header border-0 pb-0">
        <h4 class="modal-title text-primary fw-bold">Ajouter un employé</h4>
        <button type="button" class="btn-close" (click)="showAddForm = false"></button>
      </div>
      <hr class="mt-0 mb-3">
      <div class="modal-body pt-0">
        <form [formGroup]="addEmployeeForm" (ngSubmit)="addEmployee()">
          <div class="row row-cols-1 row-cols-lg-2 g-3">
            <div class="col-12 col-lg-6">
              <label for="nom" class="form-label">Nom</label>
              <input type="text" class="form-control" id="nom" formControlName="nom" required>
            </div>
            <div class="col-12 col-lg-6">
              <label for="poste" class="form-label">Poste</label>
              <input type="text" class="form-control" id="poste" formControlName="poste" required>
            </div>
            <div class="col-12 col-lg-6">
              <label for="direction" class="form-label">Direction</label>
              <input type="text" class="form-control" id="direction" formControlName="direction" required>
            </div>
            <div class="col-12 col-lg-6">
              <label for="service" class="form-label">Service</label>
              <input type="text" class="form-control" id="service" formControlName="service" required>
            </div>
            <div class="col-12 col-lg-6">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" formControlName="email" required>
            </div>
            <div class="col-12 col-lg-6">
              <label for="tel" class="form-label">Téléphone</label>
              <input type="text" class="form-control" id="tel" formControlName="tel" required>
            </div>
          </div>

          <div class="modal-footer border-0 mt-4 d-flex justify-content-center gap-2">
            <button type="submit" class="btn btn-primary px-4" [disabled]="addEmployeeForm.invalid">Ajouter</button>
            <button type="button" class="btn btn-outline-secondary px-4" (click)="showAddForm = false">Fermer</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>


<!-- Pour la pagination  -->

<!-- Pagination -->
<nav aria-label="Page navigation">
  <ul class="pagination justify-content-center">
    <li class="page-item" [class.disabled]="employeeService.currentPageNumber === 1">
      <a class="page-link" (click)="prevPage()">Previous</a>
    </li>
    <li class="page-item" *ngFor="let page of employeeService.pages" [class.active]="employeeService.currentPageNumber === page">
      <a class="page-link" (click)="goToPage(page)">{{ page }}</a>
    </li>
    <li class="page-item" [class.disabled]="employeeService.currentPageNumber === employeeService.totalPages">
      <a class="page-link" (click)="nextPage()">Next</a>
    </li>
  </ul>
</nav>



